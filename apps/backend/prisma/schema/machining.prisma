model Machine {
  id              String                @id @default(uuid())
  slug            String                @unique
  name            String
  type            MachineType
  controllerType  MachineControllerType
  controllerModel String?
  connectionType  MachineConnectionType
  connectionHost  String?
  connectionPort  Int?
  connectionUrl   String?
  createdAt       DateTime              @default(now())
  updatedAt       DateTime              @updatedAt
  deletedAt       DateTime?
  createdById     String
  updatedById     String
  deletedById     String?

  statuses MachineStatus[]

  @@index([createdById])
  @@map("machines")
}

model MachineStatus {
  id           String       @id @default(uuid())
  machineId    String
  state        MachineState
  execution    String
  controller   String
  program      String
  tool         String
  metrics      Json
  alarmCode    String
  alarmMessage String
  startTime    DateTime
  endTime      DateTime?
  duration     Int
  createdAt    DateTime     @default(now())

  machine Machine @relation(fields: [machineId], references: [id])

  @@map("machine_statuses")
}